<?xml version="1.0" encoding="utf-8" ?>
<ContentPage x:Class="Affirm8.Views.SendMessagePage"
             xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:vm="clr-namespace:Affirm8.ViewModels"
             x:DataType="vm:SendMessageViewModel"
             Title="Share Your Light"
             BackgroundColor="#FDF6E3">

    <ScrollView>
        <StackLayout Padding="20" Spacing="24">
            
            <!-- Header -->
            <StackLayout HorizontalOptions="Center" Spacing="8">
                <Label Text="âœ¨" 
                       FontSize="48" 
                       HorizontalOptions="Center" />
                <Label Text="Share a kind word with the world"
                       FontSize="18"
                       FontFamily="OpenSansRegular"
                       TextColor="#8B4513"
                       HorizontalOptions="Center"
                       HorizontalTextAlignment="Center" />
            </StackLayout>

            <!-- Category Selection -->
            <StackLayout Spacing="12">
                <Label Text="What's on your heart?"
                       FontSize="16"
                       FontFamily="OpenSansSemibold"
                       TextColor="#2F4F4F" />
                
                <CollectionView ItemsSource="{Binding Categories}"
                                SelectedItem="{Binding SelectedCategory}"
                                SelectionMode="Single"
                                HeightRequest="60">
                    <CollectionView.ItemsLayout>
                        <LinearItemsLayout Orientation="Horizontal" ItemSpacing="12" />
                    </CollectionView.ItemsLayout>
                    <CollectionView.ItemTemplate>
                        <DataTemplate x:DataType="{x:Type x:String}">
                            <Border BackgroundColor="#F0F8FF" 
                                    Stroke="#B0C4DE" 
                                    StrokeThickness="2"
                                    Padding="16,8">
                                <Border.StrokeShape>
                                    <RoundRectangle CornerRadius="20" />
                                </Border.StrokeShape>
                                <Label Text="{Binding}"
                                       FontFamily="OpenSansRegular"
                                       TextColor="#4682B4"
                                       VerticalOptions="Center" />
                            </Border>
                        </DataTemplate>
                    </CollectionView.ItemTemplate>
                </CollectionView>
            </StackLayout>

            <!-- Message Input -->
            <StackLayout Spacing="12">
                <Label Text="Your message"
                       FontSize="16"
                       FontFamily="OpenSansSemibold"
                       TextColor="#2F4F4F" />
                
                <Border BackgroundColor="#FFFEF0"
                        Stroke="#DEB887"
                        StrokeThickness="2"
                        MinimumHeightRequest="120">
                    <Border.StrokeShape>
                        <RoundRectangle CornerRadius="12" />
                    </Border.StrokeShape>
                    <Editor Text="{Binding MessageContent}"
                            Placeholder="Share something kind, hopeful, or supportive..."
                            FontFamily="OpenSansRegular"
                            FontSize="16"
                            TextColor="#2F4F4F"
                            BackgroundColor="Transparent"
                            Margin="12"
                            AutoSize="TextChanges" />
                </Border>
                
                <!-- Character hint -->
                <Label Text="{Binding MessageContent.Length, StringFormat='ðŸŒ± {0} characters of kindness'}"
                       FontSize="12"
                       TextColor="#8B4513"
                       HorizontalOptions="End" />
            </StackLayout>

            <!-- Action Buttons -->
            <StackLayout Orientation="Horizontal" 
                         Spacing="12" 
                         HorizontalOptions="Center"
                         Margin="0,20,0,0">
                
                <Button Text="Clear"
                        Command="{Binding ClearMessageCommand}"
                        BackgroundColor="#F5DEB3"
                        TextColor="#8B4513"
                        FontFamily="OpenSansSemibold"
                        WidthRequest="100"
                        HeightRequest="45"
                        CornerRadius="22" />
                
                <Button Text="{Binding IsSending, Converter={StaticResource BoolToSendButtonTextConverter}}"
                        Command="{Binding SendMessageCommand}"
                        BackgroundColor="#98FB98"
                        TextColor="#2E8B57"
                        FontFamily="OpenSansSemibold"
                        WidthRequest="140"
                        HeightRequest="45"
                        CornerRadius="22"
                        IsEnabled="{Binding IsSending, Converter={StaticResource InverseBoolConverter}}" />
            </StackLayout>

            <!-- Encouragement -->
            <StackLayout HorizontalOptions="Center" 
                         Spacing="8"
                         Margin="0,30,0,20">
                <Label Text="ðŸŒŸ"
                       FontSize="24"
                       HorizontalOptions="Center" />
                <Label Text="Every kind word makes the world brighter"
                       FontSize="14"
                       FontFamily="OpenSansRegular"
                       TextColor="#6B8E23"
                       HorizontalOptions="Center"
                       HorizontalTextAlignment="Center" />
            </StackLayout>

        </StackLayout>
    </ScrollView>

</ContentPage> 